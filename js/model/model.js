// Generated by CoffeeScript 1.8.0
(function() {
  var Player, Statistic, _Model;

  Player = Model.Player;

  Statistic = Model.Statistic;

  _Model = (function() {
    function _Model(_at_settings) {
      this.settings = _at_settings;
      this.isDay = false;
      this.isGame = false;
      this.time = 0;
      this.timer = void 0;
      this.players = {
        "length": 0
      };
      this.statistic = new Statistic(this.players);
      void 0;
    }

    _Model.prototype.addPlayer = function(name) {
      var id;
      id = this.players.length;
      this.players[id] = new Player(id, name, this.settings);
      this.players.length += 1;
      return void 0;
    };

    _Model.prototype.startGame = function() {
      return this.statistic.binds();
    };

    _Model.prototype.setDayTimer = function() {
      this.time = this.settings.stTime * 60;
      this.view.updateTime();
      this.timer = setInterval((function(_this) {
        return function() {
          _this.time -= 1;
          if (_this.time <= 0) {
            _this.changeDayNight();
          } else {
            _this.view.updateTime();
          }
          return void 0;
        };
      })(this), 1000);
      return void 0;
    };

    _Model.prototype.changeDayNight = function() {
      clearInterval(this.timer);
      if (!this.isGame) {
        this.isGame = true;
        this.isDay = true;
      } else {
        this.isDay = !this.isDay;
      }
      if (this.isDay) {
        this.setDayTimer();
      }
      this.clearSnapshots();
      this.view.updateUI();
      return void 0;
    };

    return _Model;

  })();

  window.Model.Model = _Model;

}).call(this);

//# sourceMappingURL=model.js.map
